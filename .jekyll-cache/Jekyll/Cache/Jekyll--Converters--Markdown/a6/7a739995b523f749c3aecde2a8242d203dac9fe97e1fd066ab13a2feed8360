I"¬)<blockquote>
  <p>â€œ åœ¨äººç±»å†å²çš„é•¿æ²³ä¸­ï¼ŒçœŸç†å› ä¸ºåƒé»„é‡‘ä¸€æ ·é‡ï¼Œæ€»æ˜¯æ²‰äºæ²³åº•è€Œå¾ˆéš¾è¢«äººå‘ç°ï¼Œç›¸ååœ°ï¼Œé‚£äº›ç‰›ç²ªä¸€æ ·è½»çš„è°¬è¯¯å€’ æ¼‚æµ®åœ¨ä¸Šé¢åˆ°å¤„æ³›æ»¥ã€‚ â€”â€” åŸ¹æ ¹ â€</p>
</blockquote>

<h2 id="ç®—æ³•åŸç†">ç®—æ³•åŸç†</h2>
<p>é˜®ä¸€å³°åšå®¢ <a href="http://www.ruanyifeng.com/blog/2013/05/boyer-moore_string_search_algorithm.html">å­—ç¬¦ä¸²åŒ¹é…çš„Boyer-Mooreç®—æ³•</a></p>

<h2 id="ç®—æ³•å®ç°">ç®—æ³•å®ç°</h2>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Bm</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">baseP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">badC</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">goodS</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">baseP</span> <span class="o">+</span> <span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="nx">flag</span><span class="o">++</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">flag</span> <span class="o">==</span> <span class="nx">child</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">baseP</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">badC</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">baseP</span> <span class="o">+</span> <span class="nx">i</span><span class="p">];</span>
                <span class="nx">goodS</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                <span class="c1">//é€‰æ‹©åå­—ç¬¦è§„åˆ™å’Œå¥½åç¼€è§„åˆ™è®¡ç®—å‡ºçš„è¾ƒé•¿çš„åç§»ä½æ•°</span>
                <span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">bad</span><span class="p">(</span><span class="nx">badC</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
                <span class="kd">let</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">good</span><span class="p">(</span><span class="nx">goodS</span><span class="p">,</span> <span class="nx">child</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">&gt;</span> <span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">baseP</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">baseP</span> <span class="o">+=</span> <span class="nx">g</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">baseP</span> <span class="o">&gt;=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">child</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">bad</span><span class="p">(</span><span class="nx">badC</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">i</span> <span class="o">-</span> <span class="nx">child</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">badC</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">good</span><span class="p">(</span><span class="nx">goodS</span><span class="p">,</span> <span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">goodS</span> <span class="o">==</span> <span class="dl">""</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">//æœ€é•¿çš„å¥½åç¼€è‡³åœ¨å­—ä¸²ä¸­å‡ºç°äº†ä¸€æ¬¡</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">goodS</span><span class="p">)</span> <span class="o">==</span> <span class="nx">child</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">goodS</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">tmp</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">child</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                <span class="kd">let</span> <span class="nx">newChild</span> <span class="o">=</span> <span class="nx">str</span> <span class="o">+</span> <span class="nx">child</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">newChild</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">child</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span>
    <span class="c1">//æœ€é•¿çš„å¥½åç¼€è‡³åœ¨å­—ä¸²ä¸­å‡ºç°äº†å¤šæ¬¡</span>
    <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">child</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">//å»é™¤å­—ä¸²æœ«å°¾çš„æœ€é•¿å¥½åç¼€</span>
        <span class="kd">let</span> <span class="nx">lastIndex</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">goodS</span><span class="p">)</span> <span class="o">+</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//æœ€é•¿å¥½åç¼€çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸Šä¸€æ¬¡å‡ºç°çš„ä½ç½®</span>
        <span class="k">return</span> <span class="nx">goodS</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">lastIndex</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
:ET